<!DOCTYPE html>
<html lang="en">
  <%- include("partials/head.ejs") %>
  <body class="bg-gray-50">
    <%- include('partials/navbar') %>
    <main class="max-w-4xl mx-auto p-6 my-10">
      <section class="bg-white rounded-lg shadow-md p-8">
        <h1 class="text-3xl font-bold text-primary mb-8">
          Create New Blog Post
        </h1>

        <form
          action="/blogs"
          method="POST"
          enctype="multipart/form-data"
          class="space-y-6"
        >
          <div class="space-y-2">
            <label for="title" class="block text-lg font-medium text-gray-700"
              >Blog Title</label
            >
            <input
              type="text"
              id="title"
              name="title"
              required
              class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"
              placeholder="Enter your blog title"
            />
          </div>

          <div class="space-y-2">
            <label for="image" class="block text-lg font-medium text-gray-700">
              Upload Image
            </label>
            <input
              type="file"
              id="image"
              name="image"
              accept="image/*"
              class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"
              onchange="previewImage(event)" 
            />

          <!-- Image Preview -->
          <div class="mt-4">
            <img
              id="imagePreview"
              src="#"
              alt="Image Preview"
              class="max-h-64 rounded-lg hidden border border-gray-300 p-2"
            />
          </div>

          <div class="space-y-2">
            <label for="snippet" class="block text-lg font-medium text-gray-700"
              >Blog Snippet</label
            >
            <input
              type="text"
              id="snippet"
              name="snippet"
              required
              class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"
              placeholder="A short description of your blog"
            />
          </div>

          <div class="space-y-2">
            <label for="body" class="block text-lg font-medium text-gray-700"
              >Blog Content</label
            >
            <textarea
              id="body"
              name="body"
              required
              rows="10"
              class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-secondary focus:border-transparent"
              placeholder="Write your blog content here..."
            ></textarea>
          </div>

          <div class="flex justify-center">
            <button
              type="submit"
              class="px-6 py-2 bg-primary text-white font-medium rounded-md hover:bg-secondary transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"
            >
              Publish Blog
            </button>
          </div>
        </form>
      </section>

      <script>
        function previewImage(event) {
          const input = event.target;
          const preview = document.getElementById("imagePreview");
      
          if (input.files && input.files[0]) {
            const reader = new FileReader();
      
            reader.onload = function (e) {
              preview.src = e.target.result;
              preview.classList.remove("hidden");
            };
      
            reader.readAsDataURL(input.files[0]);
          }
        }
      </script>


    </main>
    <%- include('partials/footer') %>
  </body>
</html>
